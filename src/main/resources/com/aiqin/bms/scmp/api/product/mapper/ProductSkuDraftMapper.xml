<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.aiqin.bms.scmp.api.product.mapper.ProductSkuDraftMapper">
  <resultMap id="BaseResultMap" type="com.aiqin.bms.scmp.api.product.domain.pojo.ProductSkuDraft">
    <id column="id" jdbcType="BIGINT" property="id" />
    <result column="product_code" jdbcType="VARCHAR" property="productCode" />
    <result column="product_name" jdbcType="VARCHAR" property="productName" />
    <result column="product_category_code" jdbcType="VARCHAR" property="productCategoryCode" />
    <result column="product_category_name" jdbcType="VARCHAR" property="productCategoryName" />
    <result column="sku_code" jdbcType="VARCHAR" property="skuCode" />
    <result column="spec" jdbcType="VARCHAR" property="spec" />
    <result column="unit_code" jdbcType="VARCHAR" property="unitCode" />
    <result column="sku_status" jdbcType="TINYINT" property="skuStatus" />
    <result column="del_flag" jdbcType="TINYINT" property="delFlag" />
    <result column="product_property_code" jdbcType="VARCHAR" property="productPropertyCode" />
    <result column="product_property_name" jdbcType="VARCHAR" property="productPropertyName" />
    <result column="product_brand_code" jdbcType="VARCHAR" property="productBrandCode" />
    <result column="product_brand_name" jdbcType="VARCHAR" property="productBrandName" />
    <result column="sku_abbreviation" jdbcType="VARCHAR" property="skuAbbreviation" />
    <result column="color_code" jdbcType="VARCHAR" property="colorCode" />
    <result column="color_name" jdbcType="VARCHAR" property="colorName" />
    <result column="model_number" jdbcType="VARCHAR" property="modelNumber" />
    <result column="unit_name" jdbcType="VARCHAR" property="unitName" />
    <result column="quality_assurance_management" jdbcType="TINYINT" property="qualityAssuranceManagement" />
    <result column="product_sort_code" jdbcType="VARCHAR" property="productSortCode" />
    <result column="product_sort_name" jdbcType="VARCHAR" property="productSortName" />
    <result column="quality_number" jdbcType="VARCHAR" property="qualityNumber" />
    <result column="quality_date" jdbcType="VARCHAR" property="qualityDate" />
    <result column="management_style_code" jdbcType="VARCHAR" property="managementStyleCode" />
    <result column="management_style_name" jdbcType="VARCHAR" property="managementStyleName" />
    <result column="categories_supply_channels_code" jdbcType="VARCHAR" property="categoriesSupplyChannelsCode" />
    <result column="on_sale" jdbcType="TINYINT" property="onSale" />
    <result column="categories_supply_channels_name" jdbcType="VARCHAR" property="categoriesSupplyChannelsName" />
    <result column="box_gauge" jdbcType="VARCHAR" property="boxGauge" />
    <result column="applicable_month_age" jdbcType="VARCHAR" property="applicableMonthAge" />
    <result column="point" jdbcType="VARCHAR" property="point" />
    <result column="bar_code" jdbcType="VARCHAR" property="barCode" />
    <result column="mnemonic_code" jdbcType="VARCHAR" property="mnemonicCode" />
    <result column="selection_effective_time" jdbcType="TINYINT" property="selectionEffectiveTime" />
    <result column="selection_effective_start_time" jdbcType="TIMESTAMP" property="selectionEffectiveStartTime" />
    <result column="selection_effective_end_time" jdbcType="TIMESTAMP" property="selectionEffectiveEndTime" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="create_by" jdbcType="VARCHAR" property="createBy" />
    <result column="update_time" jdbcType="TIMESTAMP" property="updateTime" />
    <result column="update_by" jdbcType="VARCHAR" property="updateBy" />
    <result column="goods_gifts" jdbcType="TINYINT" property="goodsGifts" />
    <result column="spu_code" jdbcType="VARCHAR" property="spuCode" />
    <result column="logo" jdbcType="VARCHAR" property="logo" />
    <result column="images" jdbcType="VARCHAR" property="images" />
    <result column="itro_images" jdbcType="VARCHAR" property="itroImages" />
    <result column="sku_name" jdbcType="VARCHAR" property="skuName" />
    <result column="is_main_push" jdbcType="TINYINT" property="isMainPush" />
    <result column="new_product" jdbcType="TINYINT" property="newProduct" />
    <result column="manufacturer_guide_price" jdbcType="BIGINT" property="manufacturerGuidePrice" />
    <result column="zero_removal_coefficient" jdbcType="BIGINT" property="zeroRemovalCoefficient" />
    <result column="procurement_section_code" jdbcType="VARCHAR" property="procurementSectionCode" />
    <result column="procurement_section_name" jdbcType="VARCHAR" property="procurementSectionName" />
    <result column="company_code" jdbcType="VARCHAR" property="companyCode" />
    <result column="company_name" jdbcType="VARCHAR" property="companyName" />
    <result column="seasonal_goods" jdbcType="TINYINT" property="seasonalGoods" />
    <result column="warehouse_type_code" jdbcType="VARCHAR" property="warehouseTypeCode" />
    <result column="warehouse_type_name" jdbcType="VARCHAR" property="warehouseTypeName" />
    <result column="structural_goods" jdbcType="TINYINT" property="structuralGoods" />
    <result column="apply_type" jdbcType="TINYINT" property="applyType" />
    <result column="apply_type_name" jdbcType="VARCHAR" property="applyTypeName" />
    <result column="use_time" jdbcType="INTEGER" property="useTime" />
    <result column="unique_code" jdbcType="TINYINT" property="uniqueCode" />
    <result column="inventory_model" jdbcType="TINYINT" property="inventoryModel" />
    <result column="inventory_allocation" jdbcType="TINYINT" property="inventoryAllocation" />
    <result column="price_model" jdbcType="TINYINT" property="priceModel" />
    <result column="change_content" jdbcType="VARCHAR" property="changeContent" />
    <result column="pic_folder_code" jdbcType="VARCHAR" property="picFolderCode" />
    <result column="product_desc" jdbcType="VARCHAR" property="productDesc" />
    <result column="item_number" jdbcType="VARCHAR" property="itemNumber" />
    <result column="level" jdbcType="VARCHAR" property="level" />
    <result column="season_band" jdbcType="VARCHAR" property="seasonBand" />
    <result column="feature_code" jdbcType="VARCHAR" property="featureCode" />
    <result column="feature_name" jdbcType="VARCHAR" property="featureName" />
    <result column="currency_level_code" jdbcType="VARCHAR" property="currencyLevelCode" />
    <result column="currency_level_name" jdbcType="VARCHAR" property="currencyLevelName" />
  </resultMap>
  <sql id="Base_Column_List">
    id, product_code, product_name, product_category_code, product_category_name, sku_code,
    spec, unit_code, sku_status, del_flag, product_property_code, product_property_name,
    product_brand_code, product_brand_name, sku_abbreviation, color_code, color_name,
    model_number, unit_name, quality_assurance_management, product_sort_code, product_sort_name,
    quality_number, quality_date, management_style_code, management_style_name, categories_supply_channels_code,
    on_sale, categories_supply_channels_name, box_gauge, applicable_month_age, point,
    bar_code, mnemonic_code, selection_effective_time, selection_effective_start_time,
    selection_effective_end_time, create_time, create_by, update_time, update_by, goods_gifts,
    spu_code, logo, images, itro_images, sku_name, is_main_push, new_product, manufacturer_guide_price,
    zero_removal_coefficient, procurement_section_code, procurement_section_name,company_code,
    seasonal_goods,warehouse_type_code,warehouse_type_name,structural_goods,
    apply_type,apply_type_name,use_time,unique_code,inventory_model,price_model,inventory_allocation,product_desc
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Long" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List" />
    from product_sku_draft
    where id = #{id,jdbcType=BIGINT}
  </select>
  <select id="getOfficialBySkuCode" parameterType="java.lang.String" resultMap="BaseResultMap">
    select
    <include refid="com.aiqin.bms.scmp.api.product.mapper.ProductSkuInfoMapper.Base_Column_List" />
    from product_sku
    where sku_code = #{skuCode}
  </select>
  <select id="getOfficialBySkuCodes" resultMap="BaseResultMap">
    select
    <include refid="com.aiqin.bms.scmp.api.product.mapper.ProductSkuInfoMapper.Base_Column_List" />
    from product_sku
    where company_code = #{companyCode} and sku_code in
    <foreach collection="skuCodes" open="(" close=")" item="item" separator=",">
      #{item}
    </foreach>
  </select>
  <select id="getProductSkuDraftByCompanyCode"
          resultType="com.aiqin.bms.scmp.api.product.domain.response.draft.ProductSkuDraftRespVo">
     select
       a.apply_type as applyType,
       a.apply_type_name as applyTypeName,
       a.sku_code as code,
       a.sku_name as name,
       a.procurement_section_code as purchaseGroupCode,
       a.procurement_section_name as purchaseGroupName,
       a.product_brand_code as productBrandCode,
       a.product_brand_name as productBrandName,
       a.product_category_code as productCategoryCode,
       CONCAT(lv1.category_name,'-',lv2.category_name,'-',lv3.category_name,'-',lv4.category_name) as productCategoryName,
       a.product_code as productCode,
       a.product_name as productName,
       a.create_time as createTime,
       a.create_by as createBy,
       a.pic_folder_code as picFolderCode,
       a.change_content as changeContent,
       a.original_code as originalCode
    from product_sku_draft a
    LEFT JOIN product_category lv4
      on lv4.category_id = a.product_category_code
    LEFT JOIN product_category lv3
      on lv3.category_id = lv4.parent_id
    LEFT JOIN product_category lv2
      on lv2.category_id = lv3.parent_id
    LEFT JOIN product_category lv1
      on lv1.category_id = lv2.parent_id
    where a.company_code = #{companyCode,jdbcType=VARCHAR}
    and a.procurement_section_code in (select purchase_group_code from purchase_group_buyer where buyer_code =#{personId,jdbcType=VARCHAR})
    order by a.update_time desc
  </select>

  <select id="getProductSkuDraft"
          resultType="com.aiqin.bms.scmp.api.product.domain.response.draft.ProductSkuDraftRespVo">
    select a.apply_type_name                  applyTypeName,
    case
    when a.goods_gifts = 0
    then '商品'
    when a.goods_gifts = 1
    then '赠品'
    end                            goodsGifts,
    a.sku_code                         code,
    a.sku_name                         name,
    a.product_name                     productName,
    a.product_brand_name               productBrandName,
    a.product_property_name            productPropertyName,
    g.settlement_method_name           settlementMethodName,
    a.manufacturer_guide_price         manufacturerGuidePrice,
    j.tax_included_price               taxIncludedPrice,
    i2.price_tax                       aiqinDistributionPrice,
    i3.price_tax                       mengbeishuDistributionPrice,
    i8.price_tax                       xiaohongmaDistributionPrice,
    i5.price_tax                       aiqinChannelPrice,
    i6.price_tax                       mengbeishuChannelPrice,
    i7.price_tax                       xiaohongmaChannelPrice,
    h.price_tax                        salePrice,
    i.price_tax                        memberPrice,
    g.output_tax_rate                  outputTaxRate,
    g.Input_tax_rate                   inputTaxRate,
    a.color_name                       colorName,
    a.model_number                     modelNumber,
    a.apply_type                       applyType,
    CONCAT(lv1.category_name, '-', lv2.category_name, '-', lv3.category_name, '-',
    lv4.category_name) as       productCategoryName,
    case
    when a.quality_assurance_management = 0
    then '是'
    when a.quality_assurance_management = 1
    then '否'
    end                            qualityAssuranceManagement,
    a.quality_date                     qualityDate,
    case
    when a.quality_number = 1
    then '天'
    when a.quality_number = 2
    then '月'
    when a.quality_number = 3
    then '年'
    end                            qualityNumber,
    a.applicable_month_age             applicableMonthAge,
    case
    when a.unique_code = 0
    then '是'
    when a.unique_code = 1
    then '否'
    end                            uniqueCode,
    j.supply_unit_name                 supplyUnitName,
    c.spec                             spec,
    c.unit_name                        unitName,
    l.base_product_content             inBaseProductContent,
    f.zero_removal_coefficient         zeroRemovalCoefficient,
    e.sales_code                       salesCode,
    a.change_content                   changeContent,
    a.create_by                        createBy,
    a.create_time                      createTime,
    a.update_time                      updateTime,
    a.update_by                        updateBy,
    a.selection_effective_end_time     selectionEffectiveEndTime,
    a.selection_effective_start_time   selectionEffectiveStartTime,
    a.pic_folder_code         as       picFolderCode,
    a.original_code                    originalCode,
    group_concat(m.price_channel_name) coverage,
    a.procurement_section_name         purchaseGroupName,
    a.procurement_section_code         purchaseGroupCode
    from product_sku_draft a
    left join product_sku_stock_info_draft c on a.sku_code = c.product_sku_code
    left join product_sku_box_packing_draft d
    on d.unit_code = c.unit_code and d.product_sku_code = a.sku_code
    left join product_sku_sales_info_draft e
    on e.product_sku_code = a.sku_code and e.is_default = 1
    left join product_sku_distribution_info_draft f
    on a.sku_code = f.product_sku_code
    left join product_sku_checkout_draft g on g.sku_code = a.sku_code
    left join product_sku_price_info_draft h
    on h.sku_code = a.sku_code and h.price_item_code = '1013' #售价
    left join product_sku_price_info_draft i
    on i.sku_code = a.sku_code and i.price_item_code = '1014' #会员价
    left join product_sku_supply_unit_draft j
    on j.product_sku_code = a.sku_code and j.is_default = 1
    left join product_sku_price_info_draft i2
    on i2.sku_code = a.sku_code and i2.price_item_code = '1007' #爱亲分销价
    left join product_sku_price_info_draft i3
    on i3.sku_code = a.sku_code and i3.price_item_code = '1008' #萌贝树分销价
    left join product_sku_price_info_draft i5
    on i5.sku_code = a.sku_code and i5.price_item_code = '1001' #爱亲渠道价
    left join product_sku_price_info_draft i6
    on i6.sku_code = a.sku_code and i6.price_item_code = '1002' #萌贝树渠道价
    left join product_sku_price_info_draft i7
    on i7.sku_code = a.sku_code and i7.price_item_code = '1003' #小红马渠道价
    left join product_sku_price_info_draft i8
    on i8.sku_code = a.sku_code and i8.price_item_code = '1009' #小红马分销价
    left join product_sku_manufacturer_draft k
    on a.sku_code = k.product_sku_code and k.is_default = 1
    left join product_sku_purchase_info_draft l
    on l.product_sku_code = a.sku_code
    left join product_sku_channel_draft m
    on m.sku_code = a.sku_code
    LEFT JOIN product_category lv4
    on lv4.category_id = a.product_category_code
    LEFT JOIN product_category lv3
    on lv3.category_id = lv4.parent_id
    LEFT JOIN product_category lv2
    on lv2.category_id = lv3.parent_id
    LEFT JOIN product_category lv1
    on lv1.category_id = lv2.parent_id
    where 1=1
    <if test="companyCode != null and companyCode !='' ">
      and a.company_code = #{companyCode,jdbcType=VARCHAR}
    </if>
    <if test="applyType != null">
      and a.apply_type = #{applyType}
    </if>
    <if test="purchaseGroupCode != null and purchaseGroupCode != ''">
      and a.procurement_section_code = #{purchaseGroupCode}
    </if>
    <if test="purchaseGroupName != null and purchaseGroupName != ''">
      and a.procurement_section_name = #{purchaseGroupName}
    </if>
    <if test="personId != null and personId != '' ">
      and a.procurement_section_code in (select purchase_group_code from purchase_group_buyer where buyer_code =#{personId,jdbcType=VARCHAR})
    </if>
    <if test="productName != null and productName != '' ">
      and a.product_name like concat('%',#{productName,jdbcType=VARCHAR},'%')
    </if>
    <if test="productCode != null and productCode != '' ">
      and a.product_code like concat('%',#{productCode,jdbcType=VARCHAR},'%')
    </if>
    <if test="productBrandName != null and productBrandName != '' ">
      and a.product_brand_name like concat('%',#{productBrandName,jdbcType=VARCHAR},'%')
    </if>
    <if test="productBrandCode != null and productBrandCode != '' ">
      and a.product_brand_code like concat('%',#{productBrandCode,jdbcType=VARCHAR},'%')
    </if>
    <if test="applyBy != null and applyBy != '' ">
      and a.create_by like concat('%',#{applyBy,jdbcType=VARCHAR},'%')
    </if>
    <if test="productCategoryLv1Code != null and  productCategoryLv1Code != '' ">
      and lv1.category_id = #{productCategoryLv1Code,jdbcType=VARCHAR}
    </if>
    <if test="productCategoryLv2Code != null and  productCategoryLv2Code != '' ">
      and lv2.category_id = #{productCategoryLv2Code,jdbcType=VARCHAR}
    </if>
    <if test="productCategoryLv3Code != null and  productCategoryLv3Code != '' ">
      and lv3.category_id = #{productCategoryLv3Code,jdbcType=VARCHAR}
    </if>
    <if test="productCategoryLv4Code != null and  productCategoryLv4Code != '' ">
      and lv4.category_id = #{productCategoryLv4Code,jdbcType=VARCHAR}
    </if>
    <if test="createTimeStart != null ">
      AND a.create_time &gt;=#{createTimeStart,jdbcType=TIMESTAMP}
    </if>
    <if test="createTimeEnd != null">
      AND a.create_time &lt;=#{createTimeEnd,jdbcType=TIMESTAMP}
    </if>
    <if test="updateTimeStart != null ">
      AND a.update_time &gt;=#{updateTimeStart,jdbcType=TIMESTAMP}
    </if>
    <if test="updateTimeEnd != null">
      AND a.update_time &lt;=#{updateTimeEnd,jdbcType=TIMESTAMP}
    </if>
    group by a.sku_code
    order by a.update_time desc
  </select>
  <select id="getProductSkuDraftByProductCode" parameterType="java.lang.String" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List"/>
    from product_sku_draft where product_code = #{productCode,jdbcType=VARCHAR}
  </select>
  <select id="checkBrand" resultType="java.lang.Integer">
    select
    count(0)
    from
    product_sku_draft where product_brand_code = #{brandCode}
  </select>
  <select id="checkCategory" resultType="java.lang.Integer">
    select
    count(0)
    from
    product_sku_draft where product_category_code = #{categoryCode}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long">
    delete from product_sku_draft
    where id = #{id,jdbcType=BIGINT}
  </delete>
  <insert id="insert" parameterType="com.aiqin.bms.scmp.api.product.domain.pojo.ProductSkuDraft">
    insert into product_sku_draft ( product_code, product_name,
      product_category_code, product_category_name,
      sku_code, spec, unit_code,
      sku_status, del_flag, product_property_code,
      product_property_name, product_brand_code,
      product_brand_name, sku_abbreviation, color_code,
      color_name, model_number, unit_name,
      quality_assurance_management, product_sort_code,
      product_sort_name, quality_number, quality_date,
      management_style_code, management_style_name,
      categories_supply_channels_code, on_sale, categories_supply_channels_name,
      box_gauge, applicable_month_age, point,
      bar_code, mnemonic_code, selection_effective_time,
      selection_effective_start_time, selection_effective_end_time,
      create_time, create_by, update_time,
      update_by, goods_gifts, spu_code,
      logo, images, itro_images,
      sku_name, is_main_push, new_product,
      manufacturer_guide_price, zero_removal_coefficient,
      procurement_section_code, procurement_section_name,
      seasonal_goods,structural_goods,warehouse_type_code,
      warehouse_type_name,company_code,company_name,remark,
      apply_type,apply_type_name,inventory_model,use_time,unique_code,
      inventory_allocation,price_model,change_content,pic_folder_code,product_desc,item_number,
      season_band,level,feature_code,feature_name,currency_level_code,currency_level_name
      )
    values ( #{productCode,jdbcType=VARCHAR}, #{productName,jdbcType=VARCHAR},
      #{productCategoryCode,jdbcType=VARCHAR}, #{productCategoryName,jdbcType=VARCHAR},
      #{skuCode,jdbcType=VARCHAR}, #{spec,jdbcType=VARCHAR}, #{unitCode,jdbcType=VARCHAR},
      #{skuStatus,jdbcType=TINYINT}, #{delFlag,jdbcType=TINYINT}, #{productPropertyCode,jdbcType=VARCHAR},
      #{productPropertyName,jdbcType=VARCHAR}, #{productBrandCode,jdbcType=VARCHAR},
      #{productBrandName,jdbcType=VARCHAR}, #{skuAbbreviation,jdbcType=VARCHAR}, #{colorCode,jdbcType=VARCHAR},
      #{colorName,jdbcType=VARCHAR}, #{modelNumber,jdbcType=VARCHAR}, #{unitName,jdbcType=VARCHAR},
      #{qualityAssuranceManagement,jdbcType=TINYINT}, #{productSortCode,jdbcType=VARCHAR},
      #{productSortName,jdbcType=VARCHAR}, #{qualityNumber,jdbcType=VARCHAR}, #{qualityDate,jdbcType=VARCHAR},
      #{managementStyleCode,jdbcType=VARCHAR}, #{managementStyleName,jdbcType=VARCHAR},
      #{categoriesSupplyChannelsCode,jdbcType=VARCHAR}, #{onSale,jdbcType=TINYINT}, #{categoriesSupplyChannelsName,jdbcType=VARCHAR},
      #{boxGauge,jdbcType=VARCHAR}, #{applicableMonthAge,jdbcType=VARCHAR}, #{point,jdbcType=VARCHAR},
      #{barCode,jdbcType=VARCHAR}, #{mnemonicCode,jdbcType=VARCHAR}, #{selectionEffectiveTime,jdbcType=TINYINT},
      #{selectionEffectiveStartTime,jdbcType=VARCHAR}, #{selectionEffectiveEndTime,jdbcType=VARCHAR},
      #{createTime,jdbcType=TIMESTAMP}, #{createBy,jdbcType=VARCHAR}, #{updateTime,jdbcType=TIMESTAMP},
      #{updateBy,jdbcType=VARCHAR}, #{goodsGifts,jdbcType=TINYINT}, #{spuCode,jdbcType=VARCHAR},
      #{logo,jdbcType=VARCHAR}, #{images,jdbcType=VARCHAR}, #{itroImages,jdbcType=VARCHAR},
      #{skuName,jdbcType=VARCHAR}, #{isMainPush,jdbcType=TINYINT}, #{newProduct,jdbcType=TINYINT},
      #{manufacturerGuidePrice,jdbcType=BIGINT}, #{zeroRemovalCoefficient,jdbcType=BIGINT},
      #{procurementSectionCode,jdbcType=VARCHAR}, #{procurementSectionName,jdbcType=VARCHAR},
      #{seasonalGoods,jdbcType=TINYINT},#{structuralGoods,jdbcType=TINYINT},
      #{warehouseTypeCode,jdbcType=VARCHAR}, #{warehouseTypeName,jdbcType=VARCHAR},
      #{companyCode,jdbcType=VARCHAR}, #{companyName,jdbcType=VARCHAR},#{remark,jdbcType=VARCHAR},
      #{applyType,jdbcType=TINYINT},#{applyTypeName,jdbcType=VARCHAR},#{inventoryModel,jdbcType=TINYINT},
      #{useTime,jdbcType=INTEGER},#{uniqueCode,jdbcType=TINYINT},#{inventoryAllocation,jdbcType=TINYINT},
      #{priceModel,jdbcType=TINYINT},#{changeContent,jdbcType=VARCHAR},#{picFolderCode,jdbcType=VARCHAR},#{productDesc,jdbcType=VARCHAR},
      #{itemNumber,jdbcType=VARCHAR},#{seasonBand,jdbcType=VARCHAR},#{level,jdbcType=VARCHAR},#{featureCode,jdbcType=VARCHAR},
      #{featureName,jdbcType=VARCHAR},#{currencyLevelCode,jdbcType=VARCHAR},#{currencyLevelName,jdbcType=VARCHAR}
      )
  </insert>

  <insert id="batchInsert" parameterType="java.util.List">
    insert into product_sku_draft ( product_code, product_name,
      product_category_code, product_category_name,
      sku_code, spec, unit_code,
      sku_status, del_flag, product_property_code,
      product_property_name, product_brand_code,
      product_brand_name, sku_abbreviation, color_code,
      color_name, model_number, unit_name,
      quality_assurance_management, product_sort_code,
      product_sort_name, quality_number, quality_date,
      management_style_code, management_style_name,
      categories_supply_channels_code, on_sale, categories_supply_channels_name,
      box_gauge, applicable_month_age, point,
      bar_code, mnemonic_code, selection_effective_time,
      selection_effective_start_time, selection_effective_end_time,
      create_time, create_by, update_time,
      update_by, goods_gifts, spu_code,
      logo, images, itro_images,
      sku_name, is_main_push, new_product,
      manufacturer_guide_price, zero_removal_coefficient,
      procurement_section_code, procurement_section_name,
      seasonal_goods,structural_goods,warehouse_type_code,
      warehouse_type_name,company_code,company_name,remark,
      apply_type,apply_type_name,inventory_model,use_time,unique_code,
      inventory_allocation,price_model,change_content,pic_folder_code,product_desc
      )
    values
    <foreach collection="list" item="item" separator=",">
    ( #{item.productCode,jdbcType=VARCHAR}, #{item.productName,jdbcType=VARCHAR},
      #{item.productCategoryCode,jdbcType=VARCHAR}, #{item.productCategoryName,jdbcType=VARCHAR},
      #{item.skuCode,jdbcType=VARCHAR}, #{item.spec,jdbcType=VARCHAR}, #{item.unitCode,jdbcType=VARCHAR},
      #{item.skuStatus,jdbcType=TINYINT}, #{item.delFlag,jdbcType=TINYINT}, #{item.productPropertyCode,jdbcType=VARCHAR},
      #{item.productPropertyName,jdbcType=VARCHAR}, #{item.productBrandCode,jdbcType=VARCHAR},
      #{item.productBrandName,jdbcType=VARCHAR}, #{item.skuAbbreviation,jdbcType=VARCHAR}, #{item.colorCode,jdbcType=VARCHAR},
      #{item.colorName,jdbcType=VARCHAR}, #{item.modelNumber,jdbcType=VARCHAR}, #{item.unitName,jdbcType=VARCHAR},
      #{item.qualityAssuranceManagement,jdbcType=TINYINT}, #{item.productSortCode,jdbcType=VARCHAR},
      #{item.productSortName,jdbcType=VARCHAR}, #{item.qualityNumber,jdbcType=VARCHAR}, #{item.qualityDate,jdbcType=VARCHAR},
      #{item.managementStyleCode,jdbcType=VARCHAR}, #{item.managementStyleName,jdbcType=VARCHAR},
      #{item.categoriesSupplyChannelsCode,jdbcType=VARCHAR}, #{item.onSale,jdbcType=TINYINT}, #{item.categoriesSupplyChannelsName,jdbcType=VARCHAR},
      #{item.boxGauge,jdbcType=VARCHAR}, #{item.applicableMonthAge,jdbcType=VARCHAR}, #{item.point,jdbcType=VARCHAR},
      #{item.barCode,jdbcType=VARCHAR}, #{item.mnemonicCode,jdbcType=VARCHAR}, #{item.selectionEffectiveTime,jdbcType=TINYINT},
      #{item.selectionEffectiveStartTime,jdbcType=VARCHAR}, #{item.selectionEffectiveEndTime,jdbcType=VARCHAR},
      #{item.createTime,jdbcType=TIMESTAMP}, #{item.createBy,jdbcType=VARCHAR}, #{item.updateTime,jdbcType=TIMESTAMP},
      #{item.updateBy,jdbcType=VARCHAR}, #{item.goodsGifts,jdbcType=TINYINT}, #{item.spuCode,jdbcType=VARCHAR},
      #{item.logo,jdbcType=VARCHAR}, #{item.images,jdbcType=VARCHAR}, #{item.itroImages,jdbcType=VARCHAR},
      #{item.skuName,jdbcType=VARCHAR}, #{item.isMainPush,jdbcType=TINYINT}, #{item.newProduct,jdbcType=TINYINT},
      #{item.manufacturerGuidePrice,jdbcType=BIGINT}, #{item.zeroRemovalCoefficient,jdbcType=BIGINT},
      #{item.procurementSectionCode,jdbcType=VARCHAR}, #{item.procurementSectionName,jdbcType=VARCHAR},
      #{item.seasonalGoods,jdbcType=TINYINT},#{item.structuralGoods,jdbcType=TINYINT},
      #{item.warehouseTypeCode,jdbcType=VARCHAR}, #{item.warehouseTypeName,jdbcType=VARCHAR},
      #{item.companyCode,jdbcType=VARCHAR}, #{item.companyName,jdbcType=VARCHAR},#{item.remark,jdbcType=VARCHAR},
      #{item.applyType,jdbcType=TINYINT},#{item.applyTypeName,jdbcType=VARCHAR},#{item.inventoryModel,jdbcType=TINYINT},
      #{item.useTime,jdbcType=INTEGER},#{item.uniqueCode,jdbcType=TINYINT},#{item.inventoryAllocation,jdbcType=TINYINT},
      #{item.priceModel,jdbcType=TINYINT},#{item.changeContent,jdbcType=VARCHAR},#{item.picFolderCode,jdbcType=VARCHAR},#{item.productDesc,jdbcType=VARCHAR}
      )
    </foreach>
  </insert>
  <insert id="insertSelective" parameterType="com.aiqin.bms.scmp.api.product.domain.pojo.ProductSkuDraft">
    insert into product_sku_draft
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        id,
      </if>
      <if test="productCode != null">
        product_code,
      </if>
      <if test="productName != null">
        product_name,
      </if>
      <if test="productCategoryCode != null">
        product_category_code,
      </if>
      <if test="productCategoryName != null">
        product_category_name,
      </if>
      <if test="skuCode != null">
        sku_code,
      </if>
      <if test="spec != null">
        spec,
      </if>
      <if test="unitCode != null">
        unit_code,
      </if>
      <if test="skuStatus != null">
        sku_status,
      </if>
      <if test="delFlag != null">
        del_flag,
      </if>
      <if test="productPropertyCode != null">
        product_property_code,
      </if>
      <if test="productPropertyName != null">
        product_property_name,
      </if>
      <if test="productBrandCode != null">
        product_brand_code,
      </if>
      <if test="productBrandName != null">
        product_brand_name,
      </if>
      <if test="skuAbbreviation != null">
        sku_abbreviation,
      </if>
      <if test="colorCode != null">
        color_code,
      </if>
      <if test="colorName != null">
        color_name,
      </if>
      <if test="modelNumber != null">
        model_number,
      </if>
      <if test="unitName != null">
        unit_name,
      </if>
      <if test="qualityAssuranceManagement != null">
        quality_assurance_management,
      </if>
      <if test="productSortCode != null">
        product_sort_code,
      </if>
      <if test="productSortName != null">
        product_sort_name,
      </if>
      <if test="qualityNumber != null">
        quality_number,
      </if>
      <if test="qualityDate != null">
        quality_date,
      </if>
      <if test="managementStyleCode != null">
        management_style_code,
      </if>
      <if test="managementStyleName != null">
        management_style_name,
      </if>
      <if test="categoriesSupplyChannelsCode != null">
        categories_supply_channels_code,
      </if>
      <if test="onSale != null">
        on_sale,
      </if>
      <if test="categoriesSupplyChannelsName != null">
        categories_supply_channels_name,
      </if>
      <if test="boxGauge != null">
        box_gauge,
      </if>
      <if test="applicableMonthAge != null">
        applicable_month_age,
      </if>
      <if test="point != null">
        point,
      </if>
      <if test="barCode != null">
        bar_code,
      </if>
      <if test="mnemonicCode != null">
        mnemonic_code,
      </if>
      <if test="selectionEffectiveTime != null">
        selection_effective_time,
      </if>
      <if test="selectionEffectiveStartTime != null">
        selection_effective_start_time,
      </if>
      <if test="selectionEffectiveEndTime != null">
        selection_effective_end_time,
      </if>
      <if test="createTime != null">
        create_time,
      </if>
      <if test="createBy != null">
        create_by,
      </if>
      <if test="updateTime != null">
        update_time,
      </if>
      <if test="updateBy != null">
        update_by,
      </if>
      <if test="goodsGifts != null">
        goods_gifts,
      </if>
      <if test="spuCode != null">
        spu_code,
      </if>
      <if test="logo != null">
        logo,
      </if>
      <if test="images != null">
        images,
      </if>
      <if test="itroImages != null">
        itro_images,
      </if>
      <if test="skuName != null">
        sku_name,
      </if>
      <if test="isMainPush != null">
        is_main_push,
      </if>
      <if test="newProduct != null">
        new_product,
      </if>
      <if test="manufacturerGuidePrice != null">
        manufacturer_guide_price,
      </if>
      <if test="zeroRemovalCoefficient != null">
        zero_removal_coefficient,
      </if>
      <if test="procurementSectionCode != null">
        procurement_section_code,
      </if>
      <if test="procurementSectionName != null">
        procurement_section_name,
      </if>
      <if test="inventoryAllocation != null">
        inventory_allocation,
      </if>
      <if test="priceModel != null">
        price_model,
      </if>
     <if test="productDesc != null">
          product_desc,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=BIGINT},
      </if>
      <if test="productCode != null">
        #{productCode,jdbcType=VARCHAR},
      </if>
      <if test="productName != null">
        #{productName,jdbcType=VARCHAR},
      </if>
      <if test="productCategoryCode != null">
        #{productCategoryCode,jdbcType=VARCHAR},
      </if>
      <if test="productCategoryName != null">
        #{productCategoryName,jdbcType=VARCHAR},
      </if>
      <if test="skuCode != null">
        #{skuCode,jdbcType=VARCHAR},
      </if>
      <if test="spec != null">
        #{spec,jdbcType=VARCHAR},
      </if>
      <if test="unitCode != null">
        #{unitCode,jdbcType=VARCHAR},
      </if>
      <if test="skuStatus != null">
        #{skuStatus,jdbcType=TINYINT},
      </if>
      <if test="delFlag != null">
        #{delFlag,jdbcType=TINYINT},
      </if>
      <if test="productPropertyCode != null">
        #{productPropertyCode,jdbcType=VARCHAR},
      </if>
      <if test="productPropertyName != null">
        #{productPropertyName,jdbcType=VARCHAR},
      </if>
      <if test="productBrandCode != null">
        #{productBrandCode,jdbcType=VARCHAR},
      </if>
      <if test="productBrandName != null">
        #{productBrandName,jdbcType=VARCHAR},
      </if>
      <if test="skuAbbreviation != null">
        #{skuAbbreviation,jdbcType=VARCHAR},
      </if>
      <if test="colorCode != null">
        #{colorCode,jdbcType=VARCHAR},
      </if>
      <if test="colorName != null">
        #{colorName,jdbcType=VARCHAR},
      </if>
      <if test="modelNumber != null">
        #{modelNumber,jdbcType=VARCHAR},
      </if>
      <if test="unitName != null">
        #{unitName,jdbcType=VARCHAR},
      </if>
      <if test="qualityAssuranceManagement != null">
        #{qualityAssuranceManagement,jdbcType=TINYINT},
      </if>
      <if test="productSortCode != null">
        #{productSortCode,jdbcType=VARCHAR},
      </if>
      <if test="productSortName != null">
        #{productSortName,jdbcType=VARCHAR},
      </if>
      <if test="qualityNumber != null">
        #{qualityNumber,jdbcType=VARCHAR},
      </if>
      <if test="qualityDate != null">
        #{qualityDate,jdbcType=VARCHAR},
      </if>
      <if test="managementStyleCode != null">
        #{managementStyleCode,jdbcType=VARCHAR},
      </if>
      <if test="managementStyleName != null">
        #{managementStyleName,jdbcType=VARCHAR},
      </if>
      <if test="categoriesSupplyChannelsCode != null">
        #{categoriesSupplyChannelsCode,jdbcType=VARCHAR},
      </if>
      <if test="onSale != null">
        #{onSale,jdbcType=TINYINT},
      </if>
      <if test="categoriesSupplyChannelsName != null">
        #{categoriesSupplyChannelsName,jdbcType=VARCHAR},
      </if>
      <if test="boxGauge != null">
        #{boxGauge,jdbcType=VARCHAR},
      </if>
      <if test="applicableMonthAge != null">
        #{applicableMonthAge,jdbcType=VARCHAR},
      </if>
      <if test="point != null">
        #{point,jdbcType=VARCHAR},
      </if>
      <if test="barCode != null">
        #{barCode,jdbcType=VARCHAR},
      </if>
      <if test="mnemonicCode != null">
        #{mnemonicCode,jdbcType=VARCHAR},
      </if>
      <if test="selectionEffectiveTime != null">
        #{selectionEffectiveTime,jdbcType=TINYINT},
      </if>
      <if test="selectionEffectiveStartTime != null">
        #{selectionEffectiveStartTime,jdbcType=VARCHAR},
      </if>
      <if test="selectionEffectiveEndTime != null">
        #{selectionEffectiveEndTime,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null">
        #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="createBy != null">
        #{createBy,jdbcType=VARCHAR},
      </if>
      <if test="updateTime != null">
        #{updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateBy != null">
        #{updateBy,jdbcType=VARCHAR},
      </if>
      <if test="goodsGifts != null">
        #{goodsGifts,jdbcType=TINYINT},
      </if>
      <if test="spuCode != null">
        #{spuCode,jdbcType=VARCHAR},
      </if>
      <if test="logo != null">
        #{logo,jdbcType=VARCHAR},
      </if>
      <if test="images != null">
        #{images,jdbcType=VARCHAR},
      </if>
      <if test="itroImages != null">
        #{itroImages,jdbcType=VARCHAR},
      </if>
      <if test="skuName != null">
        #{skuName,jdbcType=VARCHAR},
      </if>
      <if test="isMainPush != null">
        #{isMainPush,jdbcType=TINYINT},
      </if>
      <if test="newProduct != null">
        #{newProduct,jdbcType=TINYINT},
      </if>
      <if test="manufacturerGuidePrice != null">
        #{manufacturerGuidePrice,jdbcType=BIGINT},
      </if>
      <if test="zeroRemovalCoefficient != null">
        #{zeroRemovalCoefficient,jdbcType=BIGINT},
      </if>
      <if test="procurementSectionCode != null">
        #{procurementSectionCode,jdbcType=VARCHAR},
      </if>
      <if test="procurementSectionName != null">
        #{procurementSectionName,jdbcType=VARCHAR},
      </if>
      <if test="inventoryAllocation != null">
        #{inventoryAllocation,jdbcType=TINYINT},
      </if>
      <if test="priceModel != null">
        #{priceModel,jdbcType=TINYINT},
      </if>
      <if test="productDesc != null">
        #{productDesc,jdbcType=TINYINT},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.aiqin.bms.scmp.api.product.domain.pojo.ProductSkuDraft">
    update product_sku_draft
    <set>
      <if test="productCode != null">
        product_code = #{productCode,jdbcType=VARCHAR},
      </if>
      <if test="productName != null">
        product_name = #{productName,jdbcType=VARCHAR},
      </if>
      <if test="productCategoryCode != null">
        product_category_code = #{productCategoryCode,jdbcType=VARCHAR},
      </if>
      <if test="productCategoryName != null">
        product_category_name = #{productCategoryName,jdbcType=VARCHAR},
      </if>
      <if test="skuCode != null">
        sku_code = #{skuCode,jdbcType=VARCHAR},
      </if>
      <if test="spec != null">
        spec = #{spec,jdbcType=VARCHAR},
      </if>
      <if test="unitCode != null">
        unit_code = #{unitCode,jdbcType=VARCHAR},
      </if>
      <if test="skuStatus != null">
        sku_status = #{skuStatus,jdbcType=TINYINT},
      </if>
      <if test="delFlag != null">
        del_flag = #{delFlag,jdbcType=TINYINT},
      </if>
      <if test="productPropertyCode != null">
        product_property_code = #{productPropertyCode,jdbcType=VARCHAR},
      </if>
      <if test="productPropertyName != null">
        product_property_name = #{productPropertyName,jdbcType=VARCHAR},
      </if>
      <if test="productBrandCode != null">
        product_brand_code = #{productBrandCode,jdbcType=VARCHAR},
      </if>
      <if test="productBrandName != null">
        product_brand_name = #{productBrandName,jdbcType=VARCHAR},
      </if>
      <if test="skuAbbreviation != null">
        sku_abbreviation = #{skuAbbreviation,jdbcType=VARCHAR},
      </if>
      <if test="colorCode != null">
        color_code = #{colorCode,jdbcType=VARCHAR},
      </if>
      <if test="colorName != null">
        color_name = #{colorName,jdbcType=VARCHAR},
      </if>
      <if test="modelNumber != null">
        model_number = #{modelNumber,jdbcType=VARCHAR},
      </if>
      <if test="unitName != null">
        unit_name = #{unitName,jdbcType=VARCHAR},
      </if>
      <if test="qualityAssuranceManagement != null">
        quality_assurance_management = #{qualityAssuranceManagement,jdbcType=TINYINT},
      </if>
      <if test="productSortCode != null">
        product_sort_code = #{productSortCode,jdbcType=VARCHAR},
      </if>
      <if test="productSortName != null">
        product_sort_name = #{productSortName,jdbcType=VARCHAR},
      </if>
      <if test="qualityNumber != null">
        quality_number = #{qualityNumber,jdbcType=VARCHAR},
      </if>
      <if test="qualityDate != null">
        quality_date = #{qualityDate,jdbcType=VARCHAR},
      </if>
      <if test="managementStyleCode != null">
        management_style_code = #{managementStyleCode,jdbcType=VARCHAR},
      </if>
      <if test="managementStyleName != null">
        management_style_name = #{managementStyleName,jdbcType=VARCHAR},
      </if>
      <if test="categoriesSupplyChannelsCode != null">
        categories_supply_channels_code = #{categoriesSupplyChannelsCode,jdbcType=VARCHAR},
      </if>
      <if test="onSale != null">
        on_sale = #{onSale,jdbcType=TINYINT},
      </if>
      <if test="categoriesSupplyChannelsName != null">
        categories_supply_channels_name = #{categoriesSupplyChannelsName,jdbcType=VARCHAR},
      </if>
      <if test="boxGauge != null">
        box_gauge = #{boxGauge,jdbcType=VARCHAR},
      </if>
      <if test="applicableMonthAge != null">
        applicable_month_age = #{applicableMonthAge,jdbcType=VARCHAR},
      </if>
      <if test="point != null">
        point = #{point,jdbcType=VARCHAR},
      </if>
      <if test="barCode != null">
        bar_code = #{barCode,jdbcType=VARCHAR},
      </if>
      <if test="mnemonicCode != null">
        mnemonic_code = #{mnemonicCode,jdbcType=VARCHAR},
      </if>
      <if test="selectionEffectiveTime != null">
        selection_effective_time = #{selectionEffectiveTime,jdbcType=TINYINT},
      </if>
      <if test="selectionEffectiveStartTime != null">
        selection_effective_start_time = #{selectionEffectiveStartTime,jdbcType=VARCHAR},
      </if>
      <if test="selectionEffectiveEndTime != null">
        selection_effective_end_time = #{selectionEffectiveEndTime,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null">
        create_time = #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="createBy != null">
        create_by = #{createBy,jdbcType=VARCHAR},
      </if>
      <if test="updateTime != null">
        update_time = #{updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateBy != null">
        update_by = #{updateBy,jdbcType=VARCHAR},
      </if>
      <if test="goodsGifts != null">
        goods_gifts = #{goodsGifts,jdbcType=TINYINT},
      </if>
      <if test="spuCode != null">
        spu_code = #{spuCode,jdbcType=VARCHAR},
      </if>
      <if test="logo != null">
        logo = #{logo,jdbcType=VARCHAR},
      </if>
      <if test="images != null">
        images = #{images,jdbcType=VARCHAR},
      </if>
      <if test="itroImages != null">
        itro_images = #{itroImages,jdbcType=VARCHAR},
      </if>
      <if test="skuName != null">
        sku_name = #{skuName,jdbcType=VARCHAR},
      </if>
      <if test="isMainPush != null">
        is_main_push = #{isMainPush,jdbcType=TINYINT},
      </if>
      <if test="newProduct != null">
        new_product = #{newProduct,jdbcType=TINYINT},
      </if>
      <if test="manufacturerGuidePrice != null">
        manufacturer_guide_price = #{manufacturerGuidePrice,jdbcType=BIGINT},
      </if>
      <if test="zeroRemovalCoefficient != null">
        zero_removal_coefficient = #{zeroRemovalCoefficient,jdbcType=BIGINT},
      </if>
      <if test="procurementSectionCode != null">
        procurement_section_code = #{procurementSectionCode,jdbcType=VARCHAR},
      </if>
      <if test="procurementSectionName != null">
        procurement_section_name = #{procurementSectionName,jdbcType=VARCHAR},
      </if>
      <if test="inventoryAllocation != null">
        inventory_allocation = #{inventoryAllocation,jdbcType=TINYINT},
      </if>
      <if test="priceModel != null">
        price_model = #{priceModel,jdbcType=TINYINT},
      </if>
       <if test="productDesc != null">
         product_desc = #{productDesc,jdbcType=TINYINT},
      </if>
    </set>
    where id = #{id,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.aiqin.bms.scmp.api.product.domain.pojo.ProductSkuDraft">
    update product_sku_draft
    set product_code = #{productCode,jdbcType=VARCHAR},
      product_name = #{productName,jdbcType=VARCHAR},
      product_category_code = #{productCategoryCode,jdbcType=VARCHAR},
      product_category_name = #{productCategoryName,jdbcType=VARCHAR},
      sku_code = #{skuCode,jdbcType=VARCHAR},
      spec = #{spec,jdbcType=VARCHAR},
      unit_code = #{unitCode,jdbcType=VARCHAR},
      sku_status = #{skuStatus,jdbcType=TINYINT},
      del_flag = #{delFlag,jdbcType=TINYINT},
      product_property_code = #{productPropertyCode,jdbcType=VARCHAR},
      product_property_name = #{productPropertyName,jdbcType=VARCHAR},
      product_brand_code = #{productBrandCode,jdbcType=VARCHAR},
      product_brand_name = #{productBrandName,jdbcType=VARCHAR},
      sku_abbreviation = #{skuAbbreviation,jdbcType=VARCHAR},
      color_code = #{colorCode,jdbcType=VARCHAR},
      color_name = #{colorName,jdbcType=VARCHAR},
      model_number = #{modelNumber,jdbcType=VARCHAR},
      unit_name = #{unitName,jdbcType=VARCHAR},
      quality_assurance_management = #{qualityAssuranceManagement,jdbcType=TINYINT},
      product_sort_code = #{productSortCode,jdbcType=VARCHAR},
      product_sort_name = #{productSortName,jdbcType=VARCHAR},
      quality_number = #{qualityNumber,jdbcType=VARCHAR},
      quality_date = #{qualityDate,jdbcType=VARCHAR},
      management_style_code = #{managementStyleCode,jdbcType=VARCHAR},
      management_style_name = #{managementStyleName,jdbcType=VARCHAR},
      categories_supply_channels_code = #{categoriesSupplyChannelsCode,jdbcType=VARCHAR},
      on_sale = #{onSale,jdbcType=TINYINT},
      categories_supply_channels_name = #{categoriesSupplyChannelsName,jdbcType=VARCHAR},
      box_gauge = #{boxGauge,jdbcType=VARCHAR},
      applicable_month_age = #{applicableMonthAge,jdbcType=VARCHAR},
      point = #{point,jdbcType=VARCHAR},
      bar_code = #{barCode,jdbcType=VARCHAR},
      mnemonic_code = #{mnemonicCode,jdbcType=VARCHAR},
      selection_effective_time = #{selectionEffectiveTime,jdbcType=TINYINT},
      selection_effective_start_time = #{selectionEffectiveStartTime,jdbcType=VARCHAR},
      selection_effective_end_time = #{selectionEffectiveEndTime,jdbcType=VARCHAR},
      create_time = #{createTime,jdbcType=TIMESTAMP},
      create_by = #{createBy,jdbcType=VARCHAR},
      update_time = #{updateTime,jdbcType=TIMESTAMP},
      update_by = #{updateBy,jdbcType=VARCHAR},
      goods_gifts = #{goodsGifts,jdbcType=TINYINT},
      spu_code = #{spuCode,jdbcType=VARCHAR},
      logo = #{logo,jdbcType=VARCHAR},
      images = #{images,jdbcType=VARCHAR},
      itro_images = #{itroImages,jdbcType=VARCHAR},
      sku_name = #{skuName,jdbcType=VARCHAR},
      is_main_push = #{isMainPush,jdbcType=TINYINT},
      new_product = #{newProduct,jdbcType=TINYINT},
      manufacturer_guide_price = #{manufacturerGuidePrice,jdbcType=BIGINT},
      zero_removal_coefficient = #{zeroRemovalCoefficient,jdbcType=BIGINT},
      procurement_section_code = #{procurementSectionCode,jdbcType=VARCHAR},
      procurement_section_name = #{procurementSectionName,jdbcType=VARCHAR},
      inventory_allocation = #{inventoryAllocation,jdbcType=TINYINT},
      price_model = #{priceModel,jdbcType=TINYINT},
      product_desc = #{productDesc,jdbcType=VARCHAR}
    where id = #{id,jdbcType=BIGINT}
  </update>
  <select id="selectProductByFolderCode" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List"></include>
    from
    product_sku_draft
    where
    pic_folder_code = #{picFolderCode,jdbcType=VARCHAR}
  </select>
  <select id="checkName" resultType="java.lang.Integer">
    select count(*) from
    product_sku_draft
    where 1=1
    <if test="skuCode != null and skuCode != '' ">
      and sku_code != #{skuCode}
    </if>
    <if test="skuName != null and skuName != '' ">
      and sku_name = #{skuName}
    </if>
  </select>
    <select id="exportSku" resultType="com.aiqin.bms.scmp.api.product.domain.excel.ExportSkuInfo">
              select a.*,
               group_concat(b.price_channel_name) priceChannelName,
               group_concat(c.tag_name) tagName
        from (select a.sku_code skuCode,
               case
                   when a.goods_gifts = 0
                       then '商品'
                   when a.goods_gifts = 1
                       then '赠品'
                   else null
                   end
                          goodsGiftsDesc,
               a.sku_name skuName,
               a.sku_abbreviation skuAbbreviation,
               a.product_brand_name productBrandName,
               CONCAT(lv1.category_name,'-',lv2.category_name,'-',lv3.category_name,'-',lv4.category_name) as productCategoryName,
--                a.product_category_name productCategoryName,
               a.product_name productName,
               a.product_property_name productPropertyName,
               a.product_sort_name productSortName,
               a.procurement_section_name procurementSectionName,
               a.color_name colorName,
               a.model_number modelNumber,
               case when a.quality_assurance_management = 0 then '管理'
                    when a.quality_assurance_management = 1 then '不管理'
                    else null
                   end
                   qualityAssuranceManagementDesc,
               a.quality_number qualityDate,
               a.quality_date qualityNumber,
               a.categories_supply_channels_name categoriesSupplyChannelsName,
               a.mnemonic_code mnemonicCode,
               a.manufacturer_guide_price/100 manufacturerGuidePrice,
               a.applicable_month_age applicableMonthAge,
               case when a.seasonal_goods = 0 then '是'
                    when a.seasonal_goods = 1 then '否'
                    else null
                   end
                   seasonalGoodsDesc,
               a.warehouse_type_name warehouseTypeName,
               case when a.structural_goods = 0 then '是'
                    when a.structural_goods = 1 then '否'
                    else null
                   end
                   structuralGoodsDesc,
               a.use_time useTime,
               case when a.inventory_model = 0 then '有库存销售'
                    when a.inventory_model = 1 then '无库存销售'
                    else null
                   end
                   inventoryModelDesc,
               case when a.unique_code = 0 then '是'
                    when a.unique_code = 1 then '否'
                    else null
                   end
                   uniqueCodeDesc,
               a.remark remark,
               d.spec stockSpec,
               d.unit_name stockUnitName,
               e.box_length/100 stockBoxLength,
               e.box_width/100 stockBoxWidth,
               e.box_height/100 stockBoxHeight,
               e.box_gross_weight stockBoxGrossWeight,
               e.net_weight stockNetWeight,
               d.bar_code stockBarCode,
               f.spec purchaseSpec,
               f.unit_name purchaseUnitName,
               g.box_length/100 purchaseBoxLength,
               g.box_width/100 purchaseBoxWidth,
               g.box_height/100 purchaseBoxHeight,
               g.box_gross_weight purchaseBoxGrossWeight,
               g.net_weight purchaseNetWeight,
               f.base_product_content purchaseBaseProductContent,
               f.zero_removal_coefficient purchaseZeroRemovalCoefficient,
               f.purchase_code purchaseBarCode,
               h.spec distributionSpec,
               h.unit_name distributionUnitName,
               h.base_product_content distributionBaseProductContent,
               h.zero_removal_coefficient distributionZeroRemovalCoefficient,
               h.delivery_code distributionBarCode,
               h.max_order_num maxOrderNum,
               i.spec saleSpec,
               d.unit_name saleUnitName,
               i.sales_code saleBarCode,
               i.description description,
               j.settlement_method_name settlementMethodName,
               j.Input_tax_rate/100 inputTaxRate,
               j.output_tax_rate/100 outputTaxRate,
               j.Integral_coefficient integralCoefficient,
               j.logistics_fee_award_ratio logisticsFeeAwardRatio,
               k.supply_unit_code supplyUnitCode,
               k.supply_unit_name supplyUnitName,
               k.tax_included_price/100 taxIncludedPrice,
               k.joint_franchise_rate/100 jointFranchiseRate,
               k.point/100 point,
               k.factory_sku_code factorySkuCode,
               k.categories_supply_channels_name supplyCategoriesSupplyChannelsName
        from product_sku_draft a
                 left join product_sku_stock_info_draft d
                           on a.sku_code = d.product_sku_code
                 left join product_sku_box_packing_draft e
                           on e.unit_code = d.unit_code
                 left join product_sku_purchase_info_draft f
                           on f.product_sku_code = a.sku_code
                 left join product_sku_box_packing_draft g
                           on g.unit_code = f.unit_code
                 left join product_sku_distribution_info_draft h
                           on h.product_sku_code = a.sku_code
                 left join product_sku_sales_info_draft i
                           on a.sku_code = i.product_sku_code
                 left join product_sku_checkout_draft j
                           on a.sku_code = j.sku_code
                 left join product_sku_supply_unit_draft k
                           on k.product_sku_code = j.sku_code and k.update_by = a.update_by
                 LEFT JOIN product_category lv4
                           on lv4.category_id = a.product_category_code
                           LEFT JOIN product_category lv3
                           on lv3.category_id = lv4.parent_id
                           LEFT JOIN product_category lv2
                           on lv2.category_id = lv3.parent_id
                           LEFT JOIN product_category lv1
                           on lv1.category_id = lv2.parent_id
          where a.original_code = 1 and  a.goods_gifts != 2
        group by a.sku_code) a
        left join product_sku_channel_draft b
               on a.skuCode = b.sku_code
        left join use_tag_record c
               on a.skuCode = c.source_code
        group by a.skuCode
    </select>
  <resultMap id="selectBySkuCode" type="com.aiqin.bms.scmp.api.product.domain.pojo.ProductSkuDraft">

    <id column="aid" jdbcType="BIGINT" property="id" />
    <result column="aproduct_code" jdbcType="VARCHAR" property="productCode" />
    <result column="aproduct_name" jdbcType="VARCHAR" property="productName" />
    <result column="aproduct_category_code" jdbcType="VARCHAR" property="productCategoryCode" />
    <result column="aproduct_category_name" jdbcType="VARCHAR" property="productCategoryName" />
    <result column="asku_code" jdbcType="VARCHAR" property="skuCode" />
    <result column="aspec" jdbcType="VARCHAR" property="spec" />
    <result column="aunit_code" jdbcType="VARCHAR" property="unitCode" />
    <result column="asku_status" jdbcType="TINYINT" property="skuStatus" />
    <result column="adel_flag" jdbcType="TINYINT" property="delFlag" />
    <result column="aproduct_property_code" jdbcType="VARCHAR" property="productPropertyCode" />
    <result column="aproduct_property_name" jdbcType="VARCHAR" property="productPropertyName" />
    <result column="aproduct_brand_code" jdbcType="VARCHAR" property="productBrandCode" />
    <result column="aproduct_brand_name" jdbcType="VARCHAR" property="productBrandName" />
    <result column="asku_abbreviation" jdbcType="VARCHAR" property="skuAbbreviation" />
    <result column="acolor_code" jdbcType="VARCHAR" property="colorCode" />
    <result column="acolor_name" jdbcType="VARCHAR" property="colorName" />
    <result column="amodel_number" jdbcType="VARCHAR" property="modelNumber" />
    <result column="aunit_name" jdbcType="VARCHAR" property="unitName" />
    <result column="aquality_assurance_management" jdbcType="TINYINT" property="qualityAssuranceManagement" />
    <result column="aproduct_sort_code" jdbcType="VARCHAR" property="productSortCode" />
    <result column="aproduct_sort_name" jdbcType="VARCHAR" property="productSortName" />
    <result column="aquality_number" jdbcType="VARCHAR" property="qualityNumber" />
    <result column="aquality_date" jdbcType="VARCHAR" property="qualityDate" />
    <result column="amanagement_style_code" jdbcType="VARCHAR" property="managementStyleCode" />
    <result column="amanagement_style_name" jdbcType="VARCHAR" property="managementStyleName" />
    <result column="acategories_supply_channels_code" jdbcType="VARCHAR" property="categoriesSupplyChannelsCode" />
    <result column="aon_sale" jdbcType="TINYINT" property="onSale" />
    <result column="acategories_supply_channels_name" jdbcType="VARCHAR" property="categoriesSupplyChannelsName" />
    <result column="abox_gauge" jdbcType="VARCHAR" property="boxGauge" />
    <result column="aapplicable_month_age" jdbcType="VARCHAR" property="applicableMonthAge" />
    <result column="apoint" jdbcType="VARCHAR" property="point" />
    <result column="abar_code" jdbcType="VARCHAR" property="barCode" />
    <result column="amnemonic_code" jdbcType="VARCHAR" property="mnemonicCode" />
    <result column="aselection_effective_time" jdbcType="TINYINT" property="selectionEffectiveTime" />
    <result column="aselection_effective_start_time" jdbcType="TIMESTAMP" property="selectionEffectiveStartTime" />
    <result column="aselection_effective_end_time" jdbcType="TIMESTAMP" property="selectionEffectiveEndTime" />
    <result column="acreate_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="acreate_by" jdbcType="VARCHAR" property="createBy" />
    <result column="aupdate_time" jdbcType="TIMESTAMP" property="updateTime" />
    <result column="aupdate_by" jdbcType="VARCHAR" property="updateBy" />
    <result column="agoods_gifts" jdbcType="TINYINT" property="goodsGifts" />
    <result column="aspu_code" jdbcType="VARCHAR" property="spuCode" />
    <result column="alogo" jdbcType="VARCHAR" property="logo" />
    <result column="aimages" jdbcType="VARCHAR" property="images" />
    <result column="aitro_images" jdbcType="VARCHAR" property="itroImages" />
    <result column="asku_name" jdbcType="VARCHAR" property="skuName" />
    <result column="ais_main_push" jdbcType="TINYINT" property="isMainPush" />
    <result column="anew_product" jdbcType="TINYINT" property="newProduct" />
    <result column="amanufacturer_guide_price" jdbcType="BIGINT" property="manufacturerGuidePrice" />
    <result column="azero_removal_coefficient" jdbcType="BIGINT" property="zeroRemovalCoefficient" />
    <result column="aprocurement_section_code" jdbcType="VARCHAR" property="procurementSectionCode" />
    <result column="aprocurement_section_name" jdbcType="VARCHAR" property="procurementSectionName" />
    <result column="acompany_code" jdbcType="VARCHAR" property="companyCode" />
    <result column="acompany_name" jdbcType="VARCHAR" property="companyName" />
    <result column="aseasonal_goods" jdbcType="TINYINT" property="seasonalGoods" />
    <result column="awarehouse_type_code" jdbcType="VARCHAR" property="warehouseTypeCode" />
    <result column="awarehouse_type_name" jdbcType="VARCHAR" property="warehouseTypeName" />
    <result column="astructural_goods" jdbcType="TINYINT" property="structuralGoods" />
    <result column="aapply_type" jdbcType="TINYINT" property="applyType" />
    <result column="aapply_type_name" jdbcType="VARCHAR" property="applyTypeName" />
    <result column="ause_time" jdbcType="INTEGER" property="useTime" />
    <result column="aunique_code" jdbcType="TINYINT" property="uniqueCode" />
    <result column="ainventory_model" jdbcType="TINYINT" property="inventoryModel" />
    <result column="ainventory_allocation" jdbcType="TINYINT" property="inventoryAllocation" />
    <result column="aprice_model" jdbcType="TINYINT" property="priceModel" />
    <result column="achange_content" jdbcType="VARCHAR" property="changeContent" />
    <result column="apic_folder_code" jdbcType="VARCHAR" property="picFolderCode" />
    <result column="aproduct_desc" jdbcType="VARCHAR" property="productDesc" />
    <collection property="supplyList" ofType="com.aiqin.bms.scmp.api.product.domain.pojo.ProductSkuSupplyUnitDraft">
      <id column="bid" jdbcType="BIGINT" property="id" />
      <result column="bsupply_unit_code" jdbcType="VARCHAR" property="supplyUnitCode" />
      <result column="bsupply_unit_name" jdbcType="VARCHAR" property="supplyUnitName" />
      <result column="bno_tax_purchase_price" jdbcType="BIGINT" property="noTaxPurchasePrice" />
      <result column="btax_included_price" jdbcType="BIGINT" property="taxIncludedPrice" />
      <result column="bjoint_franchise_rate" jdbcType="BIGINT" property="jointFranchiseRate" />
      <result column="bpoint" jdbcType="BIGINT" property="point" />
      <result column="btax_rate" jdbcType="BIGINT" property="taxRate" />
      <result column="bfactory_sku_code" jdbcType="VARCHAR" property="factorySkuCode" />
      <result column="bis_default" jdbcType="TINYINT" property="isDefault" />
      <result column="bdel_flag" jdbcType="TINYINT" property="delFlag" />
      <result column="bcreate_time" jdbcType="TIMESTAMP" property="createTime" />
      <result column="bcreate_by" jdbcType="VARCHAR" property="createBy" />
      <result column="bupdate_time" jdbcType="TIMESTAMP" property="updateTime" />
      <result column="bupdate_by" jdbcType="VARCHAR" property="updateBy" />
      <result column="bproduct_sku_code" jdbcType="VARCHAR" property="productSkuCode" />
      <result column="busage_status" jdbcType="TINYINT" property="usageStatus" />
      <result column="bproduct_sku_name" jdbcType="VARCHAR" property="productSkuName" />
      <result column="bcategories_supply_channels_code" jdbcType="VARCHAR" property="categoriesSupplyChannelsCode" />
      <result column="bcategories_supply_channels_name" jdbcType="VARCHAR" property="categoriesSupplyChannelsName" />
    </collection>
  </resultMap>
  <select id="selectBySkuCode" resultMap="selectBySkuCode" >
        select a.id aid,
               a.product_code aproduct_code,
               a.product_name aproduct_name,
               a.product_category_code aproduct_category_code,
               a.product_category_name aproduct_category_name,
               a.sku_code asku_code,
               a.spec aspec,
               a.unit_code aunit_code,
               a.sku_status asku_status,
               a.del_flag adel_flag,
               a.product_property_code aproduct_property_code,
               a.product_property_name aproduct_property_name,
               a.product_brand_code aproduct_brand_code,
               a.product_brand_name aproduct_brand_name,
               a.sku_abbreviation asku_abbreviation,
               a.color_code acolor_code,
               a.color_name acolor_name,
               a.model_number amodel_number,
               a.unit_name aunit_name,
               a.quality_assurance_management aquality_assurance_management,
               a.product_sort_code aproduct_sort_code,
               a.product_sort_name aproduct_sort_name,
               a.quality_number aquality_number,
               a.quality_date aquality_date,
               a.management_style_code amanagement_style_code,
               a.management_style_name amanagement_style_name,
               a.categories_supply_channels_code acategories_supply_channels_code,
               a.on_sale aon_sale,
               a.categories_supply_channels_name acategories_supply_channels_name,
               a.box_gauge abox_gauge,
               a.applicable_month_age aapplicable_month_age,
               a.point apoint,
               a.bar_code abar_code,
               a.mnemonic_code amnemonic_code,
               a.selection_effective_time aselection_effective_time,
               a.selection_effective_start_time aselection_effective_start_time,
               a.selection_effective_end_time aselection_effective_end_time,
               a.create_time acreate_time,
               a.create_by acreate_by,
               a.update_time aupdate_time,
               a.update_by aupdate_by,
               a.goods_gifts agoods_gifts,
               a.spu_code aspu_code,
               a.logo alogo,
               a.images aimages,
               a.itro_images aitro_images,
               a.sku_name asku_name,
               a.is_main_push ais_main_push,
               a.new_product anew_product,
               a.manufacturer_guide_price amanufacturer_guide_price,
               a.zero_removal_coefficient azero_removal_coefficient,
               a.procurement_section_code aprocurement_section_code,
               a.procurement_section_name aprocurement_section_name,
               a.seasonal_goods aseasonal_goods,
               a.remark aremark,
               a.warehouse_type_code awarehouse_type_code,
               a.warehouse_type_name awarehouse_type_name,
               a.structural_goods astructural_goods,
               a.company_code acompany_code,
               a.company_name acompany_name,
               a.apply_type aapply_type,
               a.apply_type_name aapply_type_name,
               a.use_time ause_time,
               a.unique_code aunique_code,
               a.inventory_model ainventory_model,
               a.inventory_allocation ainventory_allocation,
               a.price_model aprice_model,
               a.change_content achange_content,
               a.pic_folder_code apic_folder_code,
               a.original_code aoriginal_code,
               a.product_desc aproduct_desc,
               b.id bid,
               b.supply_unit_code bsupply_unit_code,
               b.supply_unit_name bsupply_unit_name,
               b.no_tax_purchase_price bno_tax_purchase_price,
               b.tax_included_price btax_included_price,
               b.joint_franchise_rate bjoint_franchise_rate,
               b.point bpoint,
               b.is_default bis_default,
               b.del_flag bdel_flag,
               b.create_time bcreate_time,
               b.create_by bcreate_by,
               b.update_time bupdate_time,
               b.update_by bupdate_by,
               b.product_sku_code bproduct_sku_code,
               b.usage_status busage_status,
               b.product_sku_name bproduct_sku_name,
               b.categories_supply_channels_code bcategories_supply_channels_code,
               b.categories_supply_channels_name bcategories_supply_channels_name,
               b.tax_rate btax_rate,
               b.factory_sku_code bfactory_sku_code
        from product_sku_draft a
                 left join product_sku_supply_unit_draft b
                           on a.sku_code = b.product_sku_code and a.update_by = b.update_by
        where a.company_code = #{companyCode} and sku_code in
            <foreach collection="list" open="(" close=")" item="item" separator=",">
                 #{item}
            </foreach>
  </select>

</mapper>